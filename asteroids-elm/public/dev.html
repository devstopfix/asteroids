<!DOCTYPE html>
<html>
  <head>
    <title>Asteroids Arcade (ELM)</title>
    <!--link rel="icon" type="image/png" href="/icon.png" -->
    <style>
      body,
      div:first-child {
        margin: 0;
        height: 100;
      }

      elm-canvas, canvas {
        margin: auto;
        display: block;
      }
      canvas {
        border: darkred 1px solid;
      }

      body {
          background-color: #0f1213;
      }
    </style>
  </head>
  <body>
    <main></main>
    <script src="./elm-canvas.2.2.js"></script>
    <script src="./elixoids.dev.js"></script>
    <script>
      var localURL = new URL("ws://localhost:8065/0/graphics");
      var localTestCardURL = new URL("ws://localhost:8065/1/graphics");
      var serverURL = new URL("ws://g0.elixoids.devstopfix.net/0/graphics");

        function run(url, id) {
            var ws = new WebSocket(url);
            app.ports.addGame.send(id);
            ws.onmessage = function(message)
            {
                app.ports.graphicsIn.send(message.data);
            };
        }

      var app = Elm.Main.init({ node: document.querySelector("main") });
      var nextGameId = 0;

      if (app && app.ports) {
        run(localTestCardURL, nextGameId+=1 )
        app.ports.addGame.send(nextGameId+=1);
      }
    </script>
  </body>
</html>
